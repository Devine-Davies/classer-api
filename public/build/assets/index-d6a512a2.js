document.addEventListener("DOMContentLoaded",function(){grecaptcha.ready(function(){grecaptcha.execute("6LdNKLMpAAAAAFPilXVAY_0W7QTOEYkV6rgYZ6Yq",{action:"submit"}).then(function(e){document.querySelector("#form form").insertAdjacentHTML("beforeend",'<div class="hidden" ><input type="hidden" name="grc" value="'+e+'"></div>')})})});document.addEventListener("htmx:beforeRequest",e=>{document.querySelector(".error-message").classList.add("hidden"),document.querySelector("input[type=submit]").classList.add("pointer-events-none")});document.addEventListener("htmx:afterRequest",e=>{JSON.parse(e.detail.xhr.response),setTimeout(()=>{if(e.detail.successful!=!0){document.querySelector("input[type=submit]").classList.remove("pointer-events-none");const t=document.querySelector(".error-message");t.innerHTML="Something went wrong, please try again.",t.classList.remove("hidden");return}else{document.getElementById("form").classList.add("hidden");const t=e.detail.xhr.getResponseHeader("x-token");i(t)}},500)});document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".eye-show-password").forEach(t=>{t.addEventListener("click",o=>{const n=t.previousElementSibling,s=n.getAttribute("type")==="password"?"text":"password";n.setAttribute("type",s)})})});const i=e=>{fetch(pageUrl+"/api/admin/stats",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e}}).then(t=>{t.json().then(o=>{const n=document.getElementById("stats-template").innerHTML,s=document.getElementById("stats-container"),r=d(o.data);console.log(r);const a=r.map(c=>l(n,c));document.getElementById("form").classList.add("hidden"),s.innerHTML=a.join(""),setTimeout(()=>i(e),9e5)})})},d=e=>{const t={totalUsers:{icon:"people",title:"Total Users",color:"bg-blue-500"},totalMonthlyRegisters:{icon:"star",title:"Monthly Registers",color:"bg-red-500"},totalWeeklyRegisters:{icon:"star",title:"Weekly Registers",color:"bg-orange-500"},monthlyLoginsCount:{icon:"login",title:"Monthly Logins",color:"bg-yellow-500"},totalWeeklyLogins:{icon:"login",title:"Weekly Logins",color:"bg-indigo-500"}};return Object.entries(e).map(([o,n])=>({...t[o],stat:n}))},l=(e,t)=>e.replace(/\${(.*?)}/g,(o,n)=>t[n.trim()]);
