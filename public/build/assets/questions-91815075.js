let d={};questionnaire.benefits;questionnaire.affiliateLink;const g=(e,o)=>d[e]=o,w=e=>d[e],q=e=>w(e)!==void 0,y=()=>{let e=0;const o=document.querySelectorAll("[data-question-block-idx]"),i=document.querySelectorAll('[id^="form-question-block-"]'),a=document.querySelector("[data-submit]"),r=document.querySelectorAll("[data-next-question]"),u=document.querySelectorAll("[data-previous-question]"),c=document.querySelectorAll("input[type=radio]");[...r,...u].forEach(t=>t.addEventListener("click",n=>{n.preventDefault();const s=t.getAttribute("data-next-question")!==null,l=s?e+1:e-1;if(s){if(!q(e)){alert("Please select an answer before proceeding");return}const h=Object.entries(questionnaire.weights);if(!v(h,d,l)){alert("No results available, please select an answer before proceeding");return}}m(l)})),a.addEventListener("click",async t=>{t.preventDefault(),await b(d),window.location.href=`/action-camera-matcher/results/${btoa(JSON.stringify(d))}`}),c.forEach(t=>t.addEventListener("change",n=>{const s=parseInt(n.target.value);g(e,s)}));const m=t=>{e=t,o.forEach((n,s)=>s===t?n.classList.remove("hidden"):n.classList.add("hidden"))};i[e].classList.remove("hidden")};window.addEventListener("load",y);const v=(e,o,i)=>{const a=Object.entries(o).slice(0,i).reduce((r,[u,c])=>(r[u]=c,r),{});return A(e,a).length>0},A=(e,o)=>{const i=e.reduce((t,[n,s])=>{const l=s.map((p,f)=>p[o[f]]);if(l.includes("out"))return t;const h=l.reduce((p,f)=>p+f,0);return{...t,[n]:h}},{}),a=Object.entries(i),r=a.map(([,t])=>t),u=Math.max(...r),c=Math.min(...r),m=a.map(([t,n])=>{const s=u!==c?(n-c)/(u-c)*100:0;return{key:t,value:n,percentage:s}});return m.sort((t,n)=>n.percentage-t.percentage),m},b=async e=>fetch("https://classermedia.com/api/site/actions-camera-matcher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:e,grc:document.querySelector("#grc-token").value})});
