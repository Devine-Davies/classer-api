document.addEventListener("DOMContentLoaded",function(){grecaptcha.ready(function(){grecaptcha.execute("6LdNKLMpAAAAAFPilXVAY_0W7QTOEYkV6rgYZ6Yq",{action:"submit"}).then(function(e){document.querySelector("#form form").insertAdjacentHTML("beforeend",'<div class="hidden" ><input type="hidden" name="grc" value="'+e+'"></div>')})})});document.addEventListener("htmx:beforeRequest",e=>{document.querySelector(".loading-spinner").classList.remove("hidden"),document.querySelector(".error-message").classList.add("hidden"),document.querySelector("input[type=submit]").classList.add("pointer-events-none")});document.addEventListener("htmx:afterRequest",e=>{const t=JSON.parse(e.detail.xhr.response);setTimeout(()=>{if(document.querySelector(".loading-spinner").classList.add("hidden"),e.detail.successful!=!0){document.querySelector("input[type=submit]").classList.remove("pointer-events-none");const n=document.querySelector(".error-message");n.innerHTML=[500,401].includes(e.detail.xhr.status)?t.message:"Something went wrong, please try again.",n.classList.remove("hidden");return}else{const n=e.detail.xhr.getResponseHeader("x-token");o(n)}},500)});document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".eye-show-password").forEach(t=>{t.addEventListener("click",n=>{const s=t.previousElementSibling,r=s.getAttribute("type")==="password"?"text":"password";s.setAttribute("type",r)})})});const o=e=>{fetch(pageUrl+"/api/admin/stats",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+e}}).then(t=>{t.json().then(n=>{const s=document.getElementById("stats-template").innerHTML,r=document.getElementById("stats-container"),d=Object.entries(n.data).map(([a,i])=>c(s,{title:a,stat:i}));document.getElementById("form").classList.add("hidden"),r.innerHTML=d.join(""),setTimeout(()=>o(e),9e5)})})},c=(e,t)=>u(e,t),u=(e,t)=>e.replace(/\${(.*?)}/g,(n,s)=>t[s.trim()]);
